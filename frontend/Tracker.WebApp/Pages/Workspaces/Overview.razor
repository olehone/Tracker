@page "/workspaces/{WorkspaceId:guid}/overview"

@using Microsoft.AspNetCore.Components
@using Tracker.Domain.Dtos
@using Tracker.Domain.Requests.Common
@using Tracker.Services

<MudGrid>
	@if (Workspace is not null)
	{
		@foreach (var board in Workspace.Boards)
		{
			<MudItem xs="12"
					 sm="6"
					 lg="3">
				<MudNavLink Href=@($"/boards/{board.Id}")>
					<MudCard Elevation="2">
						<MudCardMedia Height="70" Style=@GetBoardColorBackgroundStyle(board)>
						</MudCardMedia>

						<MudCardContent>
							<MudText Typo="Typo.h5" Class="d-block w-100" Style=" max-height: 1.3em;overflow: hidden; "">
								@board.Title
							</MudText>
						</MudCardContent>
					</MudCard>
				</MudNavLink>
			</MudItem>
		}

		<MudItem xs="12" sm="6" lg="3">
			<MudCard Elevation=0>
				<MudButton Variant="Variant.Outlined"
						   Color="Color.Primary"
						   OnClick=@OpenDialog
						   Class="mx-4 my-2 ml-7 ">
					Create new board
				</MudButton>
			</MudCard>
		</MudItem>

	}
	else
	{
		@for (int i = 0; i < RandomBoardsCount(); i++)
		{
			<MudItem xs="12"
					 sm="6"
					 lg="3">
				<MudCard Class="h-100">
					<MudSkeleton SkeletonType="SkeletonType.Rectangle"
								 Animation="Animation.Wave"
								 Height="70px" />
					<MudCardContent>
						<MudText Typo="Typo.h5">
							<MudSkeleton Animation="Animation.Wave"
										 Width=@RandomWidth() />
						</MudText>
					</MudCardContent>
				</MudCard>
			</MudItem>
		}
	}
</MudGrid>